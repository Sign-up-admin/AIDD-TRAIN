# Flash_Dock 环境使用指南

## 📋 当前环境状态

### 已创建的两个环境

1. **flash_dock** (Python 3.8.20)
   - 用途：运行Flash_Dock原有功能
   - 位置：`C:\ProgramData\Anaconda3\envs\flash_dock`
   - 状态：✅ 已创建，SSL证书已配置

2. **flash_dock_new** (Python 3.12.12)
   - 用途：运行你的新功能代码
   - 位置：`C:\ProgramData\Anaconda3\envs\flash_dock_new`
   - 状态：✅ 已创建

## 🎯 推荐策略：双环境方案

### 为什么使用双环境？

1. **兼容性保证**
   - Flash_Dock项目依赖复杂（RDKit、PLANET、Uni-Mol）
   - 这些依赖可能在Python 3.12上有兼容性问题
   - 保持Python 3.8环境确保原有功能稳定

2. **新功能开发**
   - Python 3.12提供新特性（match-case、类型提示增强等）
   - 新代码可以使用最新Python特性
   - 独立环境，不影响原有项目

3. **风险隔离**
   - 两个环境互不干扰
   - 可以随时切换测试
   - 如果新环境有问题，不影响原有功能

## 📝 使用方式

### 运行Flash_Dock原有功能

```bash
# 激活Python 3.8环境
conda activate flash_dock

# 运行Streamlit应用
streamlit run FlashDock.py
```

### 运行新功能代码

```bash
# 激活Python 3.12环境
conda activate flash_dock_new

# 安装新功能所需的依赖
pip install your_new_dependencies

# 运行新功能代码
python your_new_code.py
```

## 🔧 环境切换

### 查看所有环境
```bash
conda env list
```

### 激活环境
```bash
conda activate flash_dock        # 激活Python 3.8环境
conda activate flash_dock_new     # 激活Python 3.12环境
```

### 退出环境
```bash
conda deactivate
```

## ⚠️ 注意事项

### Flash_Dock环境（Python 3.8）

1. **依赖限制**
   - 必须使用 `numpy<2.0.0`（RDKit要求）
   - RDKit版本：2022.9.3
   - 某些包可能需要固定版本

2. **SSL证书**
   - 已配置SSL证书
   - pip配置文件已设置
   - 如果遇到SSL问题，参考 `SSL修复总结.md`

### flash_dock_new环境（Python 3.12）

1. **依赖安装**
   - 可以安装最新版本的包
   - 注意：某些包可能需要兼容性调整
   - 如果遇到兼容性问题，可以尝试降级特定包

2. **新特性支持**
   - 可以使用Python 3.12的新特性
   - 如：match-case语句、类型提示增强等

## 🔄 如果新功能需要集成到Flash_Dock

### 方案1：在新环境中测试兼容性

1. 在新环境中安装Flash_Dock的依赖
2. 测试新功能是否与Flash_Dock兼容
3. 如果兼容，可以考虑合并环境

### 方案2：保持双环境

1. 新功能作为独立模块开发
2. 通过API或命令行接口调用
3. 保持两个环境独立运行

## 📊 环境对比

| 特性 | flash_dock (3.8) | flash_dock_new (3.12) |
|------|------------------|----------------------|
| Python版本 | 3.8.20 | 3.12.12 |
| 用途 | Flash_Dock原有功能 | 新功能代码 |
| 依赖限制 | numpy<2.0.0 | 无特殊限制 |
| 新特性支持 | ❌ | ✅ |
| 稳定性 | ✅ 已验证 | ⚠️ 待测试 |

## 💡 建议

1. **保持双环境**：确保原有功能稳定，新功能独立开发
2. **逐步测试**：在新环境中逐步测试兼容性
3. **文档记录**：记录两个环境的依赖差异
4. **定期同步**：如果新功能需要，可以考虑最终合并

## 🚀 下一步操作

### 1. 在新环境中安装依赖

```bash
conda activate flash_dock_new
pip install your_required_packages
```

### 2. 测试新功能代码

```bash
python your_new_code.py
```

### 3. 如果遇到兼容性问题

- 检查包版本兼容性
- 查看错误日志
- 考虑降级特定包或使用替代方案


