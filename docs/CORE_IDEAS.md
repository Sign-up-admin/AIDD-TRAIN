# 项目核心思想与工作流程

本文档旨在阐述 `AIDD-TRAIN` 项目的核心思想、主要工作流程以及代码结构，以帮助开发者快速理解和上手。

## 核心思想

本项目的核心目标是提供一个可扩展的、配置驱动的深度学习框架，专门用于药物发现领域的分子性质预测任务。我们致力于：

*   **模块化设计**: 将数据处理、模型构建、训练和评估等环节解耦，方便独立开发和测试。
*   **配置驱动**: 通过配置文件来定义和管理实验，使得非编程人员也能方便地运行和调整实验。
*   **易于扩展**: 提供清晰的接口，方便研究人员集成新的数据集、模型或算法。

## 工作流程

项目的主要工作流程如下：

1.  **数据准备**:
    *   原始数据（如 PDB 文件）被放置在 `PDBbind-2025.8.4` 等原始数据目录中。
    *   通过 `compass/data` 中的脚本对数据进行预处理、特征提取和图构建。
    *   处理后的数据以图对象的形式存储在 `processed_data` 目录中，以供后续模型使用。

2.  **配置实验**:
    *   在 `compass/config.py` 文件中定义实验的各项参数，包括：
        *   使用的数据集
        *   模型架构
        *   超参数（如学习率、批次大小）
        *   训练和评估的设置

3.  **模型训练**:
    *   通过运行 `compass/__main__.py` 或 `compass/main.py` 启动训练过程。
    *   `compass/engine/trainer.py` 中的 `Trainer` 类负责整个训练循环，包括：
        *   加载数据
        *   初始化模型和优化器
        *   迭代训练，并在每个 epoch 结束时进行验证
        *   保存模型检查点和日志

4.  **结果评估**:
    *   训练过程中，验证集上的性能指标会被记录在日志中。
    *   训练完成后，可以使用 `U-test` 目录中的脚本对测试集进行评估，并生成最终的性能报告。

## 代码结构

以下是项目关键模块的简要介绍：

*   `compass/`
    *   `data/`: 数据处理相关模块，包括图的构建和特征化。
    *   `engine/`: 核心训练和评估引擎。
    *   `optimizer/`: 定义优化器和学习率调度器。
    *   `config.py`: 项目的配置文件。
    *   `main.py`, `__main__.py`: 项目的入口点。
*   `docs/`: 项目文档。
*   `scripts/`: 用于执行特定任务的辅助脚本。
*   `requirements.txt`: 项目的 Python 依赖库。

## 详细模块文档

*   [数据模块 (`compass/data`)](./DATA_MODULE.md)
*   [引擎模块 (`compass/engine`)](./ENGINE_MODULE.md)
*   [模型模块 (`compass/training/model.py`)](./MODEL_MODULE.md)
