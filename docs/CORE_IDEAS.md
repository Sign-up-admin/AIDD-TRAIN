# 项目核心思想与工作流程

本文档旨在阐述 `AIDD-TRAIN` 项目的核心思想、主要工作流程以及代码结构，以帮助开发者快速理解和上手。

## 详细模块文档

*   [**核心思想与工作流程 (本文档)**](./CORE_IDEAS.md)
*   [数据模块 (`compass/data`)](./DATA_MODULE.md)
*   [模型模块 (`compass/training/model.py`)](./MODEL_MODULE.md)
*   [引擎模块 (`compass/engine`)](./ENGINE_MODULE.md)
*   [优化器模块 (`scripts/hardware_optimizer.py`)](./OPTIMIZER.md)

---

## 核心思想

在药物发现（AIDD）领域，研究人员面临一个核心挑战：如何快速、可靠地验证关于分子结构与活性关系的新想法？传统的开发流程往往伴随着高昂的工程开销：

*   **想法验证周期长**：研究员提出一个新的分子表征方法或模型架构，需要花费数天甚至数周的时间编写数据处理、训练和评估代码，然后才能看到初步结果。
*   **实验管理混乱**：大量的实验配置（如学习率、模型深度、数据集版本）散落在代码或笔记中，难以复现和比较。
*   **硬件利用率低**：研究员往往不擅长编写高性能的训练代码，导致昂贵的 GPU 资源被浪费。

本项目的核心目标就是解决上述痛点，提供一个**可扩展的、配置驱动的、自动优化的**深度学习框架，让研究员能**聚焦于算法和模型本身，而非繁杂的工程细节**。

我们致力于：

*   **模块化设计**: 将数据处理、模型构建、训练评估等环节解耦为独立的[数据模块](./DATA_MODULE.md)、[模型模块](./MODEL_MODULE.md)和[引擎模块](./ENGINE_MODULE.md)，方便独立开发和测试。
*   **配置驱动**: 通过单一的 `config.py` 文件来定义和管理所有实验，使得非编程人员也能方便地运行和调整实验。
*   **自动优化**: 提供一个强大的[优化器模块](./OPTIMIZER.md)，可以根据用户的硬件和开发阶段（原型、验证、生产）自动寻找最佳的模型和训练配置。

## 工作流程

项目的主要工作流程如下：

1.  **硬件优化 (可选但推荐)**:
    *   运行 [优化器模块 (`scripts/hardware_optimizer.py`)](./OPTIMIZER.md) 来为你的硬件找到最佳的模型尺寸和批次大小。

2.  **数据准备**:
    *   原始数据（如 PDB 文件）被放置在 `PDBbind-2025.8.4` 等原始数据目录中。
    *   通过 [数据模块 (`compass/data`)](./DATA_MODULE.md) 中的脚本对数据进行预处理、特征提取和图构建。
    *   处理后的数据以图对象的形式存储在 `processed_data` 目录中，以供后续模型使用。

3.  **配置实验**:
    *   在 `compass/config.py` 文件中定义实验的各项参数，包括从[优化器模块](./OPTIMIZER.md)得到的建议配置。

4.  **模型训练**:
    *   通过运行 `compass/__main__.py` 启动训练过程。
    *   [引擎模块 (`compass/engine`)](./ENGINE_MODULE.md) 负责整个训练循环，包括加载数据、初始化[模型模块 (`compass/training/model.py`)](./MODEL_MODULE.md)和优化器、迭代训练、并在每个 epoch 结束时进行验证、保存模型检查点和日志。

5.  **结果评估**:
    *   训练过程中，验证集上的性能指标会被记录在日志中。
    *   训练完成后，可以使用 `U-test` 目录中的脚本对测试集进行评估，并生成最终的性能报告。

## 代码结构

以下是项目关键模块的简要介绍：

*   `compass/`
    *   `data/`: [数据模块](./DATA_MODULE.md)，负责数据处理。
    *   `engine/`: [引擎模块](./ENGINE_MODULE.md)，负责核心训练和评估。
    *   `training/model.py`: [模型模块](./MODEL_MODULE.md)，负责定义模型架构。
    *   `config.py`: 项目的配置文件。
    *   `main.py`, `__main__.py`: 项目的入口点。
*   `scripts/`
    *   `hardware_optimizer.py`: [优化器模块](./OPTIMIZER.md)，负责自动硬件优化。
*   `docs/`: 项目文档。
*   `requirements.txt`: 项目的 Python 依赖库。
